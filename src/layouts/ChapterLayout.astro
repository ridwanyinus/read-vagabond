---
import BaseLayout from "./BaseLayout.astro";
import ChapterNavigation from "../components/ChapterNavigation.astro";
import ProgressBar from "../components/ProgressBar.astro";
import PageViewer from "../components/PageViewer.astro";
import ArrowKeysHint from "../components/ArrowKeysHint.astro";
import type { Props as BaseLayoutProps } from "./BaseLayout.astro";

export interface Props extends BaseLayoutProps {
  volume: number;
  chapter: {
    number: number;
    title: string;
    pagesUrl: string[];
  };
  prevChapter: number | null;
  nextChapter: number | null;
}

const { volume, chapter, prevChapter, nextChapter } = Astro.props;
---

<BaseLayout {...Astro.props}>
  <ChapterNavigation
    volume={volume}
    chapter={{
      number: chapter.number,
      title: chapter.title,
      pageCount: chapter.pagesUrl.length,
    }}
    prevChapter={prevChapter}
    nextChapter={nextChapter}
  />

  <ProgressBar />

  <PageViewer
    pagesUrl={chapter.pagesUrl}
    volume={volume}
    prevChapter={prevChapter}
    nextChapter={nextChapter}
  />

  <ArrowKeysHint />
</BaseLayout>
