---
import BaseLayout from "./BaseLayout.astro";
import ChapterNavigation from "../components/ChapterNavigation.astro";
import ProgressBar from "../components/ProgressBar.astro";
import PageViewer from "../components/PageViewer.astro";
import ChapterReader from "../components/ChapterReader.astro";
import type { Props as BaseLayoutProps } from "./BaseLayout.astro";

export interface Props extends BaseLayoutProps {
  volume: number;
  chapter: {
    number: number;
    title: string;
    pagesUrl: string[];
  };
  prevChapterNumber: number | null;
  nextChapterNumber: number | null;
}

const { volume, chapter, prevChapterNumber, nextChapterNumber } = Astro.props;
---

<BaseLayout {...Astro.props}>
  <ChapterNavigation
    volume={volume}
    chapter={{
      number: chapter.number,
      title: chapter.title,
      pageCount: chapter.pagesUrl.length,
    }}
    prevChapterNumber={prevChapterNumber}
    nextChapterNumber={nextChapterNumber}
  />

  <ProgressBar />

  <PageViewer pagesUrl={chapter.pagesUrl} />

  <ChapterReader
    volume={volume}
    pageCount={chapter.pagesUrl.length}
    prevChapterNumber={prevChapterNumber}
    nextChapterNumber={nextChapterNumber}
  />
</BaseLayout>
